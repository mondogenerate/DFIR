# App Registrations, Service Principals, OAuth Grants

# Get Permission Grants
https://gist.githubusercontent.com/psignoret/9d73b00b377002456b24fcb808265c23/raw/7d2bd76a5fafc744bb9d920f8131c9dfb024a1df/Get-AzureADPSPermissionGrants.ps1

## psignoret - AzureAd
```powershell
Connect-AzureAd
Get-AzureADServicePrincipal -All $true | .\Get-AzureADPSPermissionGrants.ps1 -Preload
```

#  Service Principals - Az Module
```powershell
Install-Module -Name Az -AllowClobber -Scope CurrentUser
# Number of days ago you want to start the search from
$daysAgo = 30

# Calculate the date for comparison
$dateLimit = (Get-Date).AddDays(-$daysAgo)

# Retrieve all service principals 
$servicePrincipals = Get-AzADServicePrincipal
```

# Resources
https://github.com/Cloud-Architekt/AzureAD-Attack-Defense/blob/main/ConsentGrant.md
